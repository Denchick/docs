---
title: Router
---

The SPQR Router configuration can be specified in JSON, TOML, or YAML format. The configuration file passing as a parameter to run command:

```
spqr-router run --config ./examples/router.yaml
```

Refer to the `pkg/config/router.go` file for the most up-to-date configuration options.

## General Settings

| Setting                  | Description                                         | Possible Values       |
|--------------------------|-----------------------------------------------------|-----------------------|
| `log_level`              | The level of logging output.                        | `debug`, `info`, `warning`, `error`, `fatal`|
| `daemonize`              | Whether to run the router as a daemon.              | `true`, `false`       |
| `reuse_port`             | Whether to create a socket with SO_REUSEPORT and SO_REUSEADDR options | `true`, `false`       |
| `use_systemd_notifier`   | Whether to use systemd notifier.                    | `true`, `false`       |
| `systemd_notifier_debug` | Whether to run systemd notifier in debug mode.      | `true`, `false`       |
| `with_coordinator`       | Whether to run the router in a special coordinator mode. | `true`, `false`  |

## Network Settings

| Setting              | Description                                       | Possible Values       |
|----------------------|---------------------------------------------------|-----------------------|
| `host`               | The host address the router listens on.           | Any valid hostname    |
| `router_port`        | The port number for the router.                   | Any valid port number |
| `router_ro_port`     | The port number for the read-only queries router. | Any valid port number |
| `admin_console_port` | The port number for the admin console.            | Any valid port number |
| `grpc_api_port`      | The port number for the gRPC API.                 | Any valid port number |

## Frontend Rules

TODO what is frontend rules?

| Setting              | Description                                       | Possible Values       |
|----------------------|---------------------------------------------------|-----------------------|
| `db`                 | Database name                                     | Any valid database name |
| `usr`                | Username                                          | Any valid username    |
| `search_path`        | TODO
| `auth_rule`          | See pkg/config/auth.go           
| `pool_mode`          | Defines the pool modes.                           | `SESSION`, `TRANSACTION` |
| `pool_discard`       |      
| `pool_rollback`      |      
| `pool_prepared_statement` |              
| `pool_default`       |      

## Backend Rules

TODO what is backend rules?

TODO table

## Shard Mapping Settings

A map from a shard name to Shard Struct presented below.

## Auth Settings

TODO via copilot

## Workload Settings

| Setting               | Description                                       | Possible Values       |
|-----------------------|---------------------------------------------------|-----------------------|
| `workload_file`       |
| `workload_batch_size` |

## Statistics Settings

| Setting          | Description                                           | Possible Values       |
|------------------|-------------------------------------------------------|-----------------------|
| `time_quantiles` | The list of time quantiles to show querry time statistics. When empty, no statistics is collected | Array of floats. For example, `[0.8]` |

## Feature Flags

| Setting                  | Description                                   | Possible Values       |
|--------------------------|-----------------------------------------------|-----------------------|
| `maintain_params`        | Whether to maintain parameters flag.          | `true`, `false`       |
| `with_jaeger`            | Whether to integrate with Jaeger for tracing. | `true`, `false`       |
| `world_shard_fallback`   | Whether to enable fallback to world shard.    | `true`, `false`       |


## Mode Settings

| Setting          | Description                                           | Possible Values       |
|------------------|-------------------------------------------------------|-----------------------|
| `pool_mode`      | Defines the pool modes.                               | `SESSION`, `TRANSACTION` |
| `shard_type`     | Defines the shard types.                              | `DATA`, `WORLD`       |
| `router_mode`    | TL;DR Use `PROXY` always. Defines the router modes. Local mode acts like a connection pooler, Proxy mode acts like a query router in sharded installation. | `LOCAL`, `PROXY`      |

## Debug Settings

| Setting          | Description                                           | Possible Values       |
|------------------|-------------------------------------------------------|-----------------------|
| `show_notice_messages` | Whether to show notice messages.                | `true`, `false`       |
| `pid_file_name`  | The file name to store the process ID.                | Any valid file path   |
| `log_file_name`  | The file name for logging output.                     | Any valid file path   |
| `pgproto_debug`  | PostgreSQL protocol debug flag.                       | `true`, `false`       |

## QDB Settings

| Setting          | Description                                           | Possible Values       |
|------------------|-------------------------------------------------------|-----------------------|
| `use_init_sql`   | Whether to execute commands from Init SQL file        | `true`, `false` |
| `use_coordinator_init` | Whether to execute commands from Init SQL file on Router | `true`, `false` |
| `init_sql`       | Path to SQL file that router will execute before the start | Any valid file path |
| `memqdb_backup_path` | MemQDB backup state path. MemQDB's state restored if a file backup exists during the router startup. If there is no file, init.sql will be used | Any valid file path |
| `memqdb_persistent` | Whether to persist router configuration in non-clustered setup | `true`, `false` |
